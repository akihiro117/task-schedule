<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">

<link rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
      crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>

<!-- DatePickerのための設定(jquery ui) -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/redmond/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<link rel="stylesheet" href="/css/common.css">
<link rel="stylesheet" href="/css/task-registration-form.css">

<script>
  $( function() {
    $( ".date" ).datepicker({
    	dateFormat: "yy/mm/dd"
    });
  } );
</script>

<title>新規タスク登録</title>
</head>
<body>

<div class="container">
    <div align="right">
        <form th:action="@{/logout}" name="logout" method="post">
            <a href="javascript:logout.submit()">ログアウト</a>
        </form>
    </div>
    <div class="row">
        <nav class="nav nav-pills">
            <a class="nav-link" href="/">Home</a>
            <a class="nav-link" href="/TaskList">タスク一覧</a>
            <a class="nav-link active" href="/task-registration-form">タスク登録</a>
        </nav>
    </div>
</div>

<form th:action="@{/TaskRegistration}" th:object="${taskRegistrationForm}" method="post">
	<div th:if="${errMsgs != null}" align="center">
	    <span th:each="errMsg : ${errMsgs}">
	        <span th:text="${errMsg}"></span><br>
	    </span>
	</div>
	<div th:if="${source == null or not source.equals('main')}" align="center">
	    <span th:if="${#fields.hasErrors('taskTitle')}" th:errors="*{taskTitle}"></span><br>
		<span th:if="${#fields.hasErrors('taskDetail')}" th:errors="*{taskDetail}"></span><br>
		<span th:if="${#fields.hasErrors('deadLineYear') or #fields.hasErrors('deadLineMonth') or
		             #fields.hasErrors('deadLineDay')}"
		      th:text="締切日を入力してください。"></span><br>
		<span th:if="${#fields.hasErrors('requiredHour') or #fields.hasErrors('requiredMinute')}"
              th:text="予定所要時間を入力してください。"></span><br>
    </div>

    <div class="container">
       <div class="row">
           <div class="col"></div>
           <div class="col align-self-center form-area rounded shadow-sm">
               <div class="form-group">
                   <label for="taskTitle">タイトル</label>
                   <input type="text" class="form-control" th:field="*{taskTitle}" placeholder="タイトル"/>
               </div>
               <div class="form-group">
                   <label for="taskDetail">詳細</label>
                   <textarea class="form-control" th:field="*{taskDetail}" placeholder="タスク詳細"></textarea>
               </div>
               <div class="form-group">
                   <label for="strDeadLine">締切日</label>
                   <input class="form-control date" type="text" th:field="*{strDeadLine}" readonly>
               </div>
               <div class="form-group">
                   <label for="requiredHour">予定所要時間</label>
                   <div class="input-group">
                       <input class="form-control" type="number" step="1" min="0" max="999" th:field="*{requiredHour}">
                       <span class="input-group-addon input-group-char">&nbsp;時間&nbsp;</span>
                       <input class="form-control" type="number" step="1" min="0" max="59" th:field="*{requiredMinute}">
                       <span class="input-group-addon input-group-char">&nbsp;分&nbsp;</span>
                   </div>
               </div>
               <div class="form-group">
                   <label for="strScheduleStartDate">予定作業日時</label>
                   <div class="input-group">
                      <input class="form-control date" type="text" th:field="*{strScheduleStartDate}" readonly>
                      <span class="input-group-addon">&nbsp;&nbsp;</span>
                      <input class="form-control" type="time" th:field="*{strScheduleStartTime}">
                      <span class="input-group-addon input-group-char">〜</span>
                      <input class="form-control" type="time" th:field="*{strScheduleEndTime}">
                      <span class="input-group-addon">&nbsp;&nbsp;</span>
                      <span class="input-group-btn">
                         <button type="button" class="btn btn-success btn-block">＋</button>
                      </span>
                   </div>
               </div>
               <div>
                   <button type="submit" class="btn btn-primary btn-block">登録</button>
               </div>
           </div>
           <div class="col"></div>
	   </div>

	</div>

</form>

</body>
</html>